<?xml version="1.0"?>

<BFSM>
		<!-- GOALS -->
		<!-- Left end of the Street -->
		<GoalSet id="0">
				<!-- <Goal capacity="1000000" id="0" max_x="-1.00" max_y="24.50" min_x="-5.00" min_y="19.50" type="AABB" weight="1.00"/> -->
				<!-- <Goal capacity="1000000" id="1" max_x="-1.00" max_y="15.50" min_x="-5.00" min_y="10.50" type="AABB" weight="1.00"/> -->
				<Goal capacity="1000000" id="0" type="point" weight="1.00" x="-1" y="22.5"/>
				<Goal capacity="1000000" id="1" type="point" weight="1.0" x="-1" y="12.5"/>
		</GoalSet>
		<!-- Right end of the street -->
		<GoalSet id="1">
			<!-- <Goal capacity="1000000" id="0" max_x="105.00" max_y="24.50" min_x="101.00" min_y="19.50" type="AABB" weight="1.00"/> -->
			<!-- <Goal capacity="1000000" id="1" max_x="105.00" max_y="15.50" min_x="101.00" min_y="10.50" type="AABB" weight="1.00"/> -->
			<Goal capacity="1000000" id="0" type="point" weight="1.00" x="101" y="22.5"/>
			<Goal capacity="1000000" id="1" type="point" weight="1.00" x="101" y="12.5"/>
		</GoalSet>
		<!-- Windows -->
		<GoalSet id="2">
			<Goal capacity="1000000" id="0" max_x="6.38" max_y="24.77" min_x="2.26" min_y="23.98" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="2" max_x="17.47" max_y="24.87" min_x="14.97" min_y="24.10" type="AABB" weight="1.10"/>
			<Goal capacity="1000000" id="3" max_x="27.52" max_y="24.82" min_x="23.98" min_y="24.27" type="AABB" weight="1.20"/>
			<Goal capacity="1000000" id="4" max_x="39.48" max_y="24.82" min_x="37.00" min_y="24.22" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="5" max_x="55.02" max_y="24.82" min_x="45.04" min_y="24.25" type="AABB" weight="1.10"/>
			<Goal capacity="1000000" id="6" max_x="65.86" max_y="24.87" min_x="62.32" min_y="24.22" type="AABB" weight="0.80"/>
			<Goal capacity="1000000" id="7" max_x="73.62" max_y="24.85" min_x="71.19" min_y="24.22" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="8" max_x="83.60" max_y="24.82" min_x="79.27" min_y="24.27" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="9" max_x="98.22" max_y="24.82" min_x="90.97" min_y="24.29" type="AABB" weight="1.20"/>
			<Goal capacity="1000000" id="10" max_x="99.06" max_y="10.92" min_x="94.64" min_y="10.12" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="11" max_x="85.00" max_y="10.74" min_x="80.36" min_y="10.12" type="AABB" weight="0.80"/>
			<Goal capacity="1000000" id="12" max_x="72.94" max_y="10.57" min_x="70.15" min_y="10.02" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="13" max_x="62.56" max_y="10.65" min_x="56.35" min_y="10.11" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="14" max_x="47.89" max_y="10.65" min_x="43.40" min_y="10.16" type="AABB" weight="1.40"/>
			<Goal capacity="1000000" id="15" max_x="34.27" max_y="10.56" min_x="29.18" min_y="10.16" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="16" max_x="23.84" max_y="10.59" min_x="20.29" min_y="10.16" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="17" max_x="12.80" max_y="10.65" min_x="11.17" min_y="10.13" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="18" max_x="5.28" max_y="10.79" min_x="1.02" min_y="10.22" type="AABB" weight="1.00"/>
		</GoalSet>
		<!-- Shops-->
		<GoalSet id="3">
			<Goal capacity="1000000" id="0" max_x="5.41" max_y="32.16" min_x="0.37" min_y="30.14" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="1" max_x="18.04" max_y="30.44" min_x="14.96" min_y="28.49" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="2" max_x="29.09" max_y="30.15" min_x="24.94" min_y="28.13" type="AABB" weight="1.35"/>
			<Goal capacity="1000000" id="3" max_x="38.87" max_y="30.02" min_x="36.78" min_y="28.95" type="AABB" weight="1.20"/>
			<Goal capacity="1000000" id="4" max_x="52.66" max_y="30.10" min_x="47.26" min_y="28.52" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="5" max_x="64.79" max_y="29.69" min_x="61.89" min_y="28.33" type="AABB" weight="1.15"/>
			<Goal capacity="1000000" id="6" max_x="53.83" max_y="24.43" min_x="53.83" min_y="24.43" type="AABB" weight="0.70"/>
			<Goal capacity="1000000" id="7" max_x="73.41" max_y="29.87" min_x="71.39" min_y="27.81" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="8" max_x="83.77" max_y="29.46" min_x="80.06" min_y="27.63" type="AABB" weight="0.90"/>
			<Goal capacity="1000000" id="9" max_x="97.91" max_y="30.31" min_x="92.33" min_y="28.04" type="AABB" weight="1.10"/>
			<Goal capacity="1000000" id="10" max_x="4.79" max_y="6.03" min_x="0.68" min_y="4.01" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="11" max_x="13.21" max_y="4.77" min_x="11.56" min_y="2.35" type="AABB" weight="0.20"/>
			<Goal capacity="1000000" id="12" max_x="23.47" max_y="5.68" min_x="21.34" min_y="4.17" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="13" max_x="33.65" max_y="7.30" min_x="30.85" min_y="6.02" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="14" max_x="48.02" max_y="4.64" min_x="43.60" min_y="3.32" type="AABB" weight="1.40"/>
			<Goal capacity="1000000" id="15" max_x="61.47" max_y="7.70" min_x="57.12" min_y="5.70" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="16" max_x="73.18" max_y="6.09" min_x="70.41" min_y="4.71" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="17" max_x="85.05" max_y="5.35" min_x="80.93" min_y="3.96" type="AABB" weight="1.00"/>
			<Goal capacity="1000000" id="18" max_x="98.91" max_y="5.96" min_x="95.68" min_y="4.13" type="AABB" weight="0.90"/>
    </GoalSet>
		<!-- Start of display and bench goals -->
		<!-- Start delete -->
		<GoalSet id="4">
			<Goal capacity="8" id="0" max_x="94.000000" min_x="90.000000" max_y="14.500000" min_y="14.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="1" max_x="95.000000" min_x="94.500000" max_y="19.000000" min_y="15.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="2" max_x="94.000000" min_x="90.000000" max_y="20.000000" min_y="19.500000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="3" max_x="89.500000" min_x="89.000000" max_y="19.000000" min_y="15.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="4" max_x="22.000000" min_x="18.000000" max_y="14.500000" min_y="14.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="5" max_x="23.000000" min_x="22.500000" max_y="19.000000" min_y="15.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="6" max_x="22.000000" min_x="18.000000" max_y="20.000000" min_y="19.500000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="7" max_x="17.500000" min_x="17.000000" max_y="19.000000" min_y="15.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="8" max_x="82.000000" min_x="78.000000" max_y="14.500000" min_y="14.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="9" max_x="83.000000" min_x="82.500000" max_y="19.000000" min_y="15.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="10" max_x="82.000000" min_x="78.000000" max_y="20.000000" min_y="19.500000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="11" max_x="77.500000" min_x="77.000000" max_y="19.000000" min_y="15.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="12" max_x="45.000000" min_x="41.000000" max_y="13.500000" min_y="13.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="13" max_x="46.000000" min_x="45.500000" max_y="18.000000" min_y="14.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="14" max_x="45.000000" min_x="41.000000" max_y="19.000000" min_y="18.500000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="15" max_x="40.500000" min_x="40.000000" max_y="18.000000" min_y="14.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="16" max_x="58.000000" min_x="54.000000" max_y="13.500000" min_y="13.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="17" max_x="59.000000" min_x="58.500000" max_y="18.000000" min_y="14.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="18" max_x="58.000000" min_x="54.000000" max_y="19.000000" min_y="18.500000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="19" max_x="53.500000" min_x="53.000000" max_y="18.000000" min_y="14.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="20" max_x="39.000000" min_x="35.000000" max_y="13.500000" min_y="13.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="21" max_x="40.000000" min_x="39.500000" max_y="18.000000" min_y="14.000000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="22" max_x="39.000000" min_x="35.000000" max_y="19.000000" min_y="18.500000" type="AABB" weight="1.00"/>
			<Goal capacity="8" id="23" max_x="34.500000" min_x="34.000000" max_y="18.000000" min_y="14.000000" type="AABB" weight="1.00"/>
		</GoalSet>
		<GoalSet id="5">
			<Goal capacity="1" id="0" type="point" weight="1.00" x="42.150000" y="19.500000"/>
			<Goal capacity="1" id="1" type="point" weight="1.00" x="42.850000" y="19.500000"/>
			<Goal capacity="1" id="2" type="point" weight="1.00" x="7.150000" y="14.500000"/>
			<Goal capacity="1" id="3" type="point" weight="1.00" x="7.850000" y="14.500000"/>
			<Goal capacity="1" id="4" type="point" weight="1.00" x="12.150000" y="18.500000"/>
			<Goal capacity="1" id="5" type="point" weight="1.00" x="12.850000" y="18.500000"/>
			<Goal capacity="1" id="6" type="point" weight="1.00" x="66.500000" y="20.150000"/>
			<Goal capacity="1" id="7" type="point" weight="1.00" x="66.500000" y="20.850000"/>
			<Goal capacity="1" id="8" type="point" weight="1.00" x="25.150000" y="17.500000"/>
			<Goal capacity="1" id="9" type="point" weight="1.00" x="25.850000" y="17.500000"/>
			<Goal capacity="1" id="10" type="point" weight="1.00" x="73.150000" y="16.500000"/>
			<Goal capacity="1" id="11" type="point" weight="1.00" x="73.850000" y="16.500000"/>
			<Goal capacity="1" id="12" type="point" weight="1.00" x="67.150000" y="12.500000"/>
			<Goal capacity="1" id="13" type="point" weight="1.00" x="67.850000" y="12.500000"/>
			<Goal capacity="1" id="14" type="point" weight="1.00" x="62.150000" y="13.500000"/>
			<Goal capacity="1" id="15" type="point" weight="1.00" x="62.850000" y="13.500000"/>
			<Goal capacity="1" id="16" type="point" weight="1.00" x="8.500000" y="18.150000"/>
			<Goal capacity="1" id="17" type="point" weight="1.00" x="8.500000" y="18.850000"/>
			<Goal capacity="1" id="18" type="point" weight="1.00" x="50.150000" y="17.500000"/>
			<Goal capacity="1" id="19" type="point" weight="1.00" x="50.850000" y="17.500000"/>
			<Goal capacity="1" id="20" type="point" weight="1.00" x="28.150000" y="16.500000"/>
			<Goal capacity="1" id="21" type="point" weight="1.00" x="28.850000" y="16.500000"/>
			<Goal capacity="1" id="22" type="point" weight="1.00" x="67.500000" y="17.150000"/>
			<Goal capacity="1" id="23" type="point" weight="1.00" x="67.500000" y="17.850000"/>
			<Goal capacity="1" id="24" type="point" weight="1.00" x="63.500000" y="16.150000"/>
			<Goal capacity="1" id="25" type="point" weight="1.00" x="63.500000" y="16.850000"/>
			<Goal capacity="1" id="26" type="point" weight="1.00" x="48.150000" y="19.500000"/>
			<Goal capacity="1" id="27" type="point" weight="1.00" x="48.850000" y="19.500000"/>
			<Goal capacity="1" id="28" type="point" weight="1.00" x="72.150000" y="15.500000"/>
			<Goal capacity="1" id="29" type="point" weight="1.00" x="72.850000" y="15.500000"/>
			<Goal capacity="1" id="30" type="point" weight="1.00" x="49.150000" y="13.500000"/>
			<Goal capacity="1" id="31" type="point" weight="1.00" x="49.850000" y="13.500000"/>
			<Goal capacity="1" id="32" type="point" weight="1.00" x="61.500000" y="15.150000"/>
			<Goal capacity="1" id="33" type="point" weight="1.00" x="61.500000" y="15.850000"/>
			<Goal capacity="1" id="34" type="point" weight="1.00" x="59.500000" y="20.150000"/>
			<Goal capacity="1" id="35" type="point" weight="1.00" x="59.500000" y="20.850000"/>
			<Goal capacity="1" id="36" type="point" weight="1.00" x="33.500000" y="20.150000"/>
			<Goal capacity="1" id="37" type="point" weight="1.00" x="33.500000" y="20.850000"/>
			<Goal capacity="1" id="38" type="point" weight="1.00" x="20.150000" y="12.500000"/>
			<Goal capacity="1" id="39" type="point" weight="1.00" x="20.850000" y="12.500000"/>
			<Goal capacity="1" id="40" type="point" weight="1.00" x="11.150000" y="14.500000"/>
			<Goal capacity="1" id="41" type="point" weight="1.00" x="11.850000" y="14.500000"/>
			<Goal capacity="1" id="42" type="point" weight="1.00" x="63.500000" y="20.150000"/>
			<Goal capacity="1" id="43" type="point" weight="1.00" x="63.500000" y="20.850000"/>
			<Goal capacity="1" id="44" type="point" weight="1.00" x="86.150000" y="12.500000"/>
			<Goal capacity="1" id="45" type="point" weight="1.00" x="86.850000" y="12.500000"/>
			<Goal capacity="1" id="46" type="point" weight="1.00" x="75.500000" y="16.150000"/>
			<Goal capacity="1" id="47" type="point" weight="1.00" x="75.500000" y="16.850000"/>
			<Goal capacity="1" id="48" type="point" weight="1.00" x="31.500000" y="13.150000"/>
			<Goal capacity="1" id="49" type="point" weight="1.00" x="31.500000" y="13.850000"/>
			<Goal capacity="1" id="50" type="point" weight="1.00" x="83.150000" y="12.500000"/>
			<Goal capacity="1" id="51" type="point" weight="1.00" x="83.850000" y="12.500000"/>
			<Goal capacity="1" id="52" type="point" weight="1.00" x="30.500000" y="16.150000"/>
			<Goal capacity="1" id="53" type="point" weight="1.00" x="30.500000" y="16.850000"/>
			<Goal capacity="1" id="54" type="point" weight="1.00" x="84.500000" y="20.150000"/>
			<Goal capacity="1" id="55" type="point" weight="1.00" x="84.500000" y="20.850000"/>
			<Goal capacity="1" id="56" type="point" weight="1.00" x="5.500000" y="18.150000"/>
			<Goal capacity="1" id="57" type="point" weight="1.00" x="5.500000" y="18.850000"/>
			<Goal capacity="1" id="58" type="point" weight="1.00" x="33.500000" y="15.150000"/>
			<Goal capacity="1" id="59" type="point" weight="1.00" x="33.500000" y="15.850000"/>
			<Goal capacity="1" id="60" type="point" weight="1.00" x="4.150000" y="13.500000"/>
			<Goal capacity="1" id="61" type="point" weight="1.00" x="4.850000" y="13.500000"/>
			<Goal capacity="1" id="62" type="point" weight="1.00" x="73.500000" y="20.150000"/>
			<Goal capacity="1" id="63" type="point" weight="1.00" x="73.500000" y="20.850000"/>
			<Goal capacity="1" id="64" type="point" weight="1.00" x="13.500000" y="20.150000"/>
			<Goal capacity="1" id="65" type="point" weight="1.00" x="13.500000" y="20.850000"/>
			<Goal capacity="1" id="66" type="point" weight="1.00" x="69.500000" y="15.150000"/>
			<Goal capacity="1" id="67" type="point" weight="1.00" x="69.500000" y="15.850000"/>
			<Goal capacity="1" id="68" type="point" weight="1.00" x="83.500000" y="16.150000"/>
			<Goal capacity="1" id="69" type="point" weight="1.00" x="83.500000" y="16.850000"/>
		</GoalSet>
		<!-- End delete -->
		<!-- End of display and bench goals -->
		<!-- BEHAVIOURS -->
		<State name="Start" final="0" >
			<GoalSelector type="identity"/>
			<VelComponent type="goal"/>
		</State>
		<State name="NotMovingStart" final="0">
			<GoalSelector type="identity"/>
			<VelComponent type="goal"/>
		</State>

		<!-- Agents choose a behaviour based on probability		 -->
		<Transition from="Start">
			<Condition type="auto"/>
			<Target type="prob">
				<State name="GoLeftSide" weight="1.3"/>
				<State name="GoRightSide" weight="1.3"/>
				<State name="WindowShoppingSelector" weight="1.0"/>
				<State name="GoToShopSelector" weight="1.0"/>
				<State name="GoToUnit" weight="0.1"/>
				<State name="GoToBench" weight="0.1"/>
			</Target>
		</Transition>

		<!-- This state selector is used as an option from reaching the end of the street -->
		<Transition from="NotMovingStart">
			<Condition type="auto"/>
			<Target type="prob">
				<State name="WindowShoppingSelector" weight="1.0"/>
				<State name="GoToShopSelector" weight="1.0"/>
				<State name="GoToUnit" weight="0.1"/>
				<State name="GoToBench" weight="0.1"/>
			</Target>
		</Transition>

		<!-- Walking States and teleportation functionality -->
		<State name ="GoLeftSide" final="0">
			<GoalSelector type="random" goal_set="0"/>
			<VelComponent type="road_map" file_name="graph.txt"/>
		</State>
		<State name="GoRightSide" final="0">
			<GoalSelector type="random" goal_set="1"/>
			<VelComponent type="road_map" file_name="graph.txt"/>
		</State>
		<State name="ReachedLeftSide" final="0">
			<GoalSelector type="identity"/>
			<VelComponent type="zero"/>
			<Action type="teleport" dist="u" min_x="100.0" max_x="101.0" min_y="10.5" max_y="24.5"/>
		</State>
		<State name="ReachedRightSide" final="1">
			<GoalSelector type="identity"/>
			<VelComponent type="zero"/>
			<Action type="teleport" dist="u" min_x="-1.0" max_x="0.0" min_y="10.5" max_y="24.5"/>
		</State>

		<!-- Transitions for the walking behaviours -->
		<Transition from="GoLeftSide" to="ReachedLeftSide">
			<Condition type="AABB" min_x="-30.0" max_x="0.0" min_y="10.0" max_y="25.0" inside="1"/>
		</Transition>
		<Transition from="GoRightSide" to="ReachedRightSide">
			<Condition type="AABB" min_x="100.0" max_x="130.0" min_y="10.0" max_y="25.0" inside="1"/>
		</Transition>
		<Transition from="ReachedLeftSide">
			<Condition type="auto"/>
			<Target type="prob">
				<State name="GoLeftSide" weight="1"/>
				<State name="NotMovingStart" weight="0.6"/>
			</Target>
		</Transition>
		<Transition from="ReachedRightSide">
			<Condition type="auto"/>
			<Target type="prob">
				<State name="GoRightSide" weight="1"/>
				<State name="NotMovingStart" weight="0.6"/>
			</Target>
		</Transition>


		<!-- Type of window shopping selection -->
		<State name="WindowShoppingSelector" final="0">
			<GoalSelector type="identity"/>
			<VelComponent type="goal"/>
		</State>
		<State name="WindowShoppingRandom" final="0">
			<GoalSelector type="random" goal_set="2"/>
			<VelComponent type="road_map" file_name="graph.txt"/>
			<Action type="scale_property" property="pref_speed" dist="c" value="0.8" exit_reset="1"/>
		</State>
		<State name="WindowShoppingWeighted" final="0">
			<GoalSelector type="weighted" goal_set="2"/>
			<VelComponent type="road_map" file_name="graph.txt"/>
			<Action type="scale_property" property="pref_speed" dist="c" value="0.8" exit_reset="1"/>
		</State>
		<State name="WindowShoppingNearest" final="0">
			<GoalSelector type="nearest" goal_set="2"/>
			<VelComponent type="road_map" file_name="graph.txt"/>
			<Action type="scale_property" property="pref_speed" dist="c" value="0.8" exit_reset="1"/>
		</State>
		<Transition from="WindowShoppingSelector">
			<Condition type="auto"/>
			<Target type="prob">
				<State name="WindowShoppingRandom" weight="0.6"/>
				<State name="WindowShoppingWeighted" weight="1.0"/>
				<State name="WindowShoppingNearest" weight="0.6"/>
			</Target>
		</Transition>

		<State name="GoToUnit" final="0">
			<GoalSelector type="random" goal_set="4"/>
			<VelComponent type="road_map" file_name="graph.txt"/>
			<Action type="scale_property" property="pref_speed" dist="c" value="0.75" exit_reset="1"/>
		</State>
		<State name="GoToBench" final="0">
			<GoalSelector type="nearest" goal_set="5" per_agent="1" persistent="0"/>
			<VelComponent type="road_map" file_name="graph.txt"/>
			<Action type="scale_property" property="pref_speed" dist="c" value="0.75" exit_reset="1"/>
		</State>

		<!-- Type of GoToShop selection -->
		<State name="GoToShopSelector" final="0">
			<GoalSelector type="identity"/>
			<VelComponent type="goal"/>
		</State>
		<State name="GoToShopRandom" final="0">
			<GoalSelector type="random" goal_set="3" per_agent="0"/>
			<VelComponent type="road_map" file_name="graph.txt"/>
		</State>
		<State name="GoToShopWeighted" final="0">
			<GoalSelector type="weighted" goal_set="3" per_agent="0"/>
			<VelComponent type="road_map" file_name="graph.txt"/>
		</State>
		<State name="GoToShopNearest" final="0">
			<GoalSelector type="nearest" goal_set="3" per_agent="0"/>
			<VelComponent type="road_map" file_name="graph.txt"/>
		</State>
		<Transition from="GoToShopSelector">
			<Condition type="auto"/>
			<Target type="prob">
				<State name="GoToShopRandom" weight="0.6"/>
				<State name="GoToShopWeighted" weight="1.0"/>
				<State name="GoToShopNearest" weight="0.6"/>
			</Target>
		</Transition>

		<State name="AtWindow" final="0">
			<GoalSelector type="identity"/>
			<VelComponent type="goal"/>
		</State>
		<State name="Like" final="0">
			<GoalSelector type="nearest" goal_set="3" per_agent="0"/>
			<VelComponent type="road_map" file_name="graph.txt"/>
		</State>
		<State name="InShop" final="0">
			<GoalSelector type="identity"/>
			<VelComponent type="zero"/>
		</State>

		<State name="AtDisplay" final="0">
			<GoalSelector type="identity"/>
			<VelComponent type="goal"/>
		</State>
		<State name="AtBench" final="0">
			<GoalSelector type="identity"/>
			<VelComponent type="goal"/>
		</State>

		<!-- Window Shopping routine -->
		<Transition from="WindowShoppingRandom,WindowShoppingWeighted,WindowShoppingNearest" to="AtWindow">
			<Condition type="goal_reached" distance="0.1"/>
		</Transition>
		<Transition from="AtWindow">
			<Condition type="timer" dist="u" min="3" max="7" seed="0" per_agent="1"/>
			<Target type="prob">
				<State name="Like" weight="1"/>
				<State name="Start" weight="1"/>
			</Target>
		</Transition>
		<Transition from="Like" to="InShop">
			<Condition type="goal_reached" distance="0.1"/>
		</Transition>
		<Transition from="GoToShopRandom,GoToShopWeighted,GoToShopNearest" to="InShop">
			<Condition type="goal_reached" distance="0.1"/>
		</Transition>
		<Transition from="InShop">
			<Condition type="timer" dist="u" min="10" max="30" seed="0" per_agent="1"/>
			<Target type="prob">
				<State name="Start" weight="1"/>
			</Target>
		</Transition>

		<!-- Behaviour routines for sitting at benches/going toa unit -->
		<Transition from="GoToUnit" to="AtDisplay">
			<Condition type="goal_reached" distance="0.1"/>
		</Transition>
		<Transition from="AtDisplay" to="Start">
			<Condition type="timer" dist="n" mean="10" stddev="2" per_agent="1" />
		</Transition>
		<Transition from="GoToBench" to="AtBench">
			<Condition type="goal_reached" distance="0.1"/>
		</Transition>
		<Transition from="AtBench" to="Start">
			<Condition type="timer" dist="n" mean="30" stddev="5" per_agent="1" />
		</Transition>

</BFSM>
